#!/usr/bin/env node

'use strict';

const yargs = require('yargs');
const chalk = require('chalk');

process.env.DEBUG=true;

function logError(err) {
    if(err) {
        if (process.env.DEBUG) {
            console.error(err);
        }
        switch(typeof err) {
            case 'string':
                console.log(` ${chalk.red('Error!')} ${err}`)
                break;
            case 'object':
                if(err.message) {
                    console.log(` ${chalk.red('Error!')} ${err.message}`)
                    break;
                }
            default:
            console.log(` ${chalk.red('Error!')}\n  ${err}`)
        }
    }
    else {
        yargs.showHelp();
    }
}

try {
    yargs.commandDir('../dist/cli/cmds')
        .help()
        .alias('h', 'help')
        .demandCommand()
        .wrap(null)
        .strict(true)
        .argv;
} catch(e) {
    logError(e);
}